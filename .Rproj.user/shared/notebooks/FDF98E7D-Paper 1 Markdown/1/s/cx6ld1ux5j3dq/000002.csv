"0","#### set folder path where all tsv files are stored"
"0","file.paths <- ""C:/Users/Alex/Documents/GitHub/CCCPP/Coding/Output/"""
"0","# find file paths"
"0","dfiles <- sort(list.files(path = file.paths, full.names = T))"
"0",""
"0","# read every file into object"
"0","video.data <- lapply(dfiles, function(i) {"
"0","  xx <- read_tsv(i, skip = 20)"
"0","  colnames(xx) <- gsub(colnames(xx), pattern = "" "", replacement = ""_"", fixed = T)"
"0","  xx <- xx[order(xx$Time), ]"
"0","  xx$Media_file_path <- gsub(xx$Media_file_path, pattern = file.paths, replacement = """", fixed = T)"
"0","  xx$Media_file_path <- gsub(xx$Media_file_path, pattern = "".mp4"", replacement = """", fixed = T)"
"0","  xx$Media_file_path <- gsub(xx$Media_file_path, pattern = "".dv"", replacement = """", fixed = T)"
"0","  xx <- xx[xx$Behavior != ""Start"", ]"
"0","  xx <- xx[xx$Behavior != ""Solo Play"", ]"
"0","  xx <- xx[xx$Behavior != ""Comment"", ]"
"0","  xx <- xx %>% select(-Total_length, -FPS, -Status)"
"0","  xx <- xx %>%"
"0","    mutate(play.bout = (Behavior == ""End"")) %>%"
"0","    group_by(play.bout) %>%"
"0","    mutate(bout.nr = cumsum(as.numeric(play.bout))) %>%"
"0","    ungroup() %>%"
"0","    mutate(bout.nr = cumsum(bout.nr)) %>%"
"0","    select(-play.bout)"
"0","  xx$bout.nr <- match(xx$bout.nr, unique(xx$bout.nr))"
"0","  xx$bout.nr[xx$Behavior == ""End""] <- xx$bout.nr[xx$Behavior == ""End""] - 1"
"0","  xx <- xx %>% unite(bout.nr, Media_file_path, bout.nr, sep = ""_"", remove = FALSE)"
"0","  return(xx)"
"0","})"
"0",""
"0","video.data <- video.data[sapply(video.data, ncol) == 15]"
"0","video.data <- do.call(rbind, video.data)"
"0",""
